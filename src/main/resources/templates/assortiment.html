<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ассортимент - Багетная мастерская</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link th:href="@{/css/styleassortiment.css}" rel="stylesheet">
    <style>
        .personal-cabinet-btn {
            background: #8B4513;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }
        
        .personal-cabinet-btn:hover {
            background: #A0522D;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(139, 69, 19, 0.3);
            color: white;
            text-decoration: none;
        }
        
        .personal-cabinet-btn i {
            font-size: 12px;
        }

        /* Убираем выделение активной ссылки */
        .nav-link.active {
            background-color: transparent !important;
            color: inherit !important;
        }

        /* Убираем подчеркивание и другие эффекты */
        .nav-link {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        .nav-link:hover {
            text-decoration: none !important;
            border-bottom: none !important;
        }

        /* Стили для сворачиваемых блоков */
        .collapsible {
            background-color: #f8f9fa;
            color: #333;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 18px;
            font-weight: bold;
            margin-top: 20px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .active, .collapsible:hover {
            background-color: #e9ecef;
        }

        .collapsible:after {
            content: '\002B';
            color: #777;
            font-weight: bold;
            float: right;
            margin-left: 5px;
        }

        .active:after {
            content: "\2212";
        }

        .content {
            padding: 0 18px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            background-color: white;
        }

        .stock-available {
            color: #28a745;
            font-weight: bold;
        }

        .stock-low {
            color: #ffc107;
            font-weight: bold;
        }

        .stock-out {
            color: #dc3545;
            font-weight: bold;
        }

        .category-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            border-radius: 8px 8px 0 0;
        }

        .kit-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            border-radius: 8px 8px 0 0;
        }

        .image-url-input {
            width: 100%;
            padding: 8px;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .image-url-input:focus {
            outline: none;
            border-color: #8B4513;
        }

        .update-image-btn {
            background: #8B4513;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-top: 5px;
            transition: background-color 0.3s ease;
        }

        .update-image-btn:hover {
            background: #A0522D;
        }
    </style>
</head>
<body>
<header class="header">
    <div class="contactcontainer">
        <div class="header-content">
            <div class="logo">
                <i class="fas fa-palette logo-icon"></i>
                <div class="logo-text">
                    <h1>Багетная мастерская</h1>
                    <p>Оформление картин и фотографий с 2005 года</p>
                </div>
            </div>
            <nav class="navigation">
                <ul>
                    <li><a href="http://localhost:9090/api/formindex" class="nav-link">Главная</a></li>
                    <li><a href="http://localhost:9090/api/formsvedeniy" class="nav-link">О нас</a></li>
                    <li><a href="http://localhost:9090/api/formassortiment" class="nav-link">Ассортимент</a></li>
                    <li><a href="http://localhost:9090/api/formyslygs" class="nav-link">Услуги</a></li>
                    <li><a href="http://localhost:9090/api/formotziv" class="nav-link">Отзывы</a></li>
                    <li><a href="http://localhost:9090/api/formcontact" class="nav-link">Информация</a></li>
                    <li th:if="${user != null}">
                        <a href="http://localhost:9090/api/formspecial" class="personal-cabinet-btn">
                            <i class="fas fa-user"></i> Кабинет
                        </a>
                    </li>
                    <li th:if="${user == null}">
                        <a href="http://localhost:9090/api/formauto" class="nav-link">Войти</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</header>

<main class="main-content">
    <div class="contactcontainer assortment-section">
        <h2 class="section-title">Наш ассортимент</h2>

        <button type="button" class="collapsible">Расходные материалы</button>
        <div class="content">
            <div class="category-grid">
                <div class="category-card" th:each="consumable : ${consumables}">
                    <div class="category-image" th:style="'background-image: url(https://via.placeholder.com/300x200/4A6572/FFFFFF?text=' + ${#strings.replace(consumable.name, ' ', '+')} + ');'"></div>
                    <div class="category-content">
                        <h3 th:text="${consumable.name}">Название материала</h3>
                        <p th:text="${consumable.description}">Описание материала</p>
                        <div class="price-range" th:text="'от ' + ${#numbers.formatDecimal(consumable.price, 1, 2, 'COMMA')} + ' ₽/' + ${consumable.unit}">от 0 ₽/шт</div>
                        <input type="text" class="image-url-input" placeholder="Введите URL изображения" onchange="updateImage(this)">
                        <ul class="materials-list">
                            <li th:with="stockInt=${T(java.lang.Integer).valueOf(consumable.stockQuantity)}">
                                Наличие:
                                <span th:class="${stockInt > 10} ? 'stock-available' : (${stockInt} > 0 ? 'stock-low' : 'stock-out')"
                                      th:text="${stockInt > 0} ? (${stockInt} + ' шт.') : 'Нет в наличии'">
                                    В наличии
                                </span>
                            </li>
                            <li>Качественные материалы</li>
                            <li>Гарантия качества</li>
                            <li>Быстрая доставка</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <button type="button" class="collapsible">Наборы для вышивания</button>
        <div class="content">
            <div class="category-grid">
                <div class="category-card" th:each="kit : ${embroideryKits}">
                    <div class="kit-image" th:if="${kit.image}" th:style="'background-image: url(' + ${kit.image} + ')'"></div>
                    <div class="category-image"
                         th:unless="${kit.image}"
                         th:style="'background-image: url(https://img.joomcdn.net/7510efa49361c2d2d680877db51a4981d6a1298a_original.jpeg)'">
                    </div>
                    <div class="category-content">
                        <h3 th:text="${kit.name}">Название набора</h3>
                        <p th:text="${kit.description}">Описание набора</p>
                        <div class="price-range" th:text="'от ' + ${#numbers.formatDecimal(kit.price, 1, 2, 'COMMA')} + ' ₽'">от 0 ₽</div>
                        <input type="text" class="image-url-input" placeholder="Введите URL изображения" onchange="updateImage(this)">
                        <ul class="materials-list">
                            <li th:with="stockInt=${T(java.lang.Integer).valueOf(kit.stockQuantity)}">
                                Наличие:
                                <span th:class="${stockInt > 5} ? 'stock-available' : (${stockInt} > 0 ? 'stock-low' : 'stock-out')"
                                      th:text="${stockInt > 0} ? (${stockInt} + ' шт.') : 'Нет в наличии'">
                                    В наличии
                                </span>
                            </li>
                            <li>Полный комплект</li>
                            <li>Инструкция включена</li>
                            <li>Высокое качество</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <button type="button" class="collapsible">Виды багета</button>
        <div class="content">
            <div class="category-grid">
                <div class="category-card">
                    <div class="category-image" style="background-image: url('https://avatars.mds.yandex.net/i?id=2a000001991b21d4d2d964347e50d1a7a2a4-16134031-yarec&n=13')"></div>
                    <div class="category-content">
                        <h3>Деревянный багет</h3>
                        <p>Классические рамы из натурального дерева с резьбой и позолотой</p>
                        <div class="price-range">от 1 500 ₽/п.м.</div>
                        <input type="text" class="image-url-input" placeholder="Введите URL изображения" onchange="updateImage(this)">
                        <ul class="materials-list">
                            <li>Дуб, ясень, орех</li>
                            <li>Позолота 24 карата</li>
                            <li>Ручная резьба</li>
                            <li>Антикварная патина</li>
                        </ul>
                    </div>
                </div>

                <div class="category-card">
                    <div class="category-image" style="background-image: url('https://i9.photo.2gis.com/images/branch/72/10133099190304916_0329.jpg')"></div>
                    <div class="category-content">
                        <h3>Пластиковый багет</h3>
                        <p>Современные легкие рамы с широкой палитрой цветов</p>
                        <div class="price-range">от 800 ₽/п.м.</div>
                        <input type="text" class="image-url-input" placeholder="Введите URL изображения" onchange="updateImage(this)">
                        <ul class="materials-list">
                            <li>Водостойкий пластик</li>
                            <li>200+ цветов</li>
                            <li>Имитация дерева</li>
                            <li>Металлические эффекты</li>
                        </ul>
                    </div>
                </div>

                <div class="category-card">
                    <div class="category-image" style="background-image: url('https://amiel.club/uploads/posts/2022-10/1665001341_25-amiel-club-p-dekorativnii-baget-dlya-sten-vkontakte-26.jpg')"></div>
                    <div class="category-content">
                        <h3>Алюминиевый багет</h3>
                        <p>Стильные рамы для современного интерьера и фотографий</p>
                        <div class="price-range">от 1 200 ₽/п.м.</div>
                        <input type="text" class="image-url-input" placeholder="Введите URL изображения" onchange="updateImage(this)">
                        <ul class="materials-list">
                            <li>Анодированный алюминий</li>
                            <li>Хромированные поверхности</li>
                            <li>Матовые и глянцевые</li>
                            <li>Угловые соединения</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <button type="button" class="collapsible">Дополнительные услуги</button>
        <div class="content">
            <div class="services-section">
                <h2 class="section-title">Дополнительные услуги</h2>
                <div class="services-grid">
                    <div class="service-item">
                        <i class="fas fa-cut"></i>
                        <h4>Паспарту</h4>
                        <p>Изготовление паспарту любых размеров и цветов</p>
                        <div class="price-range">от 500 ₽</div>
                    </div>
                    <div class="service-item">
                        <i class="fas fa-shield-alt"></i>
                        <h4>Защитное стекло</h4>
                        <p>Антибликовое, музейное, ударопрочное стекло</p>
                        <div class="price-range">от 300 ₽</div>
                    </div>
                    <div class="service-item">
                        <i class="fas fa-hammer"></i>
                        <h4>Реставрация рам</h4>
                        <p>Восстановление старинных и антикварных рам</p>
                        <div class="price-range">от 2 000 ₽</div>
                    </div>
                    <div class="service-item">
                        <i class="fas fa-truck"></i>
                        <h4>Доставка и монтаж</h4>
                        <p>Профессиональный монтаж в любом месте города</p>
                        <div class="price-range">от 1 000 ₽</div>
                    </div>
                </div>
            </div>
        </div>

        <br>
        <br>
        <br>

        <div class="contact-info">
            <h2>Консультация по ассортименту</h2>
            <div class="contact-cards">
                <div class="contact-card">
                    <i class="fas fa-phone"></i>
                    <h3>Телефон</h3>
                    <p>+7 (495) 123-45-67</p>
                </div>
                <div class="contact-card">
                    <i class="fas fa-envelope"></i>
                    <h3>Email</h3>
                    <p>info@art-rama.ru</p>
                </div>
                <div class="contact-card">
                    <i class="fas fa-map-marker-alt"></i>
                    <h3>Адрес</h3>
                    <p>г. Москва, ул. Художественная, д. 15</p>
                </div>
                <div class="contact-card">
                    <i class="fas fa-clock"></i>
                    <h3>Время работы</h3>
                    <p>Пн-Пт: 10:00-20:00<br>Сб-Вс: 11:00-18:00</p>
                </div>
            </div>
        </div>
    </div>
</main>

<footer class="footer">
    <div class="contactcontainer">
        <p>&copy; 2025 Багетная мастерская. Все права защищены.</p>
    </div>
</footer>

<script>
    function redirectToPersonal() {
        window.location.href = 'http://localhost:9090/api/formspecial';
    }

    // JavaScript для сворачиваемых блоков
    document.addEventListener('DOMContentLoaded', function() {
        var coll = document.getElementsByClassName("collapsible");
        for (var i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function() {
                this.classList.toggle("active");
                var content = this.nextElementSibling;
                if (content.style.maxHeight) {
                    content.style.maxHeight = null;
                } else {
                    content.style.maxHeight = content.scrollHeight + "px";
                }
            });
        }

        // Автоматически открываем первый блок
        if (coll.length > 0) {
            coll[0].click();
        }
    });

    // Функция для обновления изображения по URL
    function updateImage(input) {
        const imageUrl = input.value.trim();
        if (imageUrl) {
            // Находим ближайший контейнер изображения
            const card = input.closest('.category-card');
            const imageElement = card.querySelector('.category-image, .kit-image');
            
            // Устанавливаем новое изображение
            imageElement.style.backgroundImage = `url('${imageUrl}')`;
            
            // Показываем уведомление об успешной загрузке
            showUploadNotification('Изображение успешно обновлено!');
        }
    }

    // Функция для показа уведомления
    function showUploadNotification(message) {
        // Создаем элемент уведомления
        const notification = document.createElement('div');
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 15px 20px;
            border-radius: 5px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1000;
            font-weight: bold;
            transition: opacity 0.3s ease;
        `;
        notification.textContent = message;
        
        // Добавляем уведомление на страницу
        document.body.appendChild(notification);
        
        // Удаляем уведомление через 3 секунды
        setTimeout(() => {
            notification.style.opacity = '0';
            setTimeout(() => {
                document.body.removeChild(notification);
            }, 300);
        }, 3000);
    }
</script>
</body>
</html>